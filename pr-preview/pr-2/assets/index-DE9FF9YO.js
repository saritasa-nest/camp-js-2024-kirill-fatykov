var S=Object.defineProperty;var g=(t,e,s)=>e in t?S(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var n=(t,e,s)=>g(t,typeof e!="symbol"?e+"":e,s);import"./modulepreload-polyfill-B5Qt9EMX.js";class l{constructor(){n(this,"subscribers",[])}subscribe(e){this.subscribers.includes(e)||this.subscribers.push(e)}unsubscribe(e){const s=this.subscribers.indexOf(e);s!==-1&&this.subscribers.splice(s,1)}notify(e){this.subscribers.forEach(s=>s.update(e))}}const x=6;class E extends l{constructor(e=x){super(),this.sideDice=e,this.sideDice=e}rollDice(){const{crypto:e}=window,s=new Uint8Array(1);return e.getRandomValues(s),s[0]%this.sideDice+1}notify(e){this.subscribers.forEach((s,i)=>{e===i&&s.update(this.rollDice())})}update(e){this.notify(e)}}const h=-1;class I extends l{constructor(s=2){super();n(this,"currentPlayerIndex",h);this.playerCount=s,this.playerCount=s}next(){this.currentPlayerIndex===this.playerCount-1||this.currentPlayerIndex===h?this.currentPlayerIndex=0:this.currentPlayerIndex+=1,this.notify(this.currentPlayerIndex)}}const R=21;class m extends l{constructor(){super(...arguments);n(this,"diceResults",[])}result(s){this.diceResults.push(s)}getSumDices(){return this.diceResults.reduce((s,i)=>s+i,0)}getWinStatus(){return this.diceResults.reduce((s,i)=>s+i,0)>=R}notify(s){this.subscribers.forEach(i=>{i.update(s)})}update(s){this.result(s),this.notify(s)}}class w{constructor(){n(this,"allDice",[])}getSumDices(){return this.allDice.reduce((e,s)=>e+s,0)}update(e){this.allDice.push(e)}}const r=document.querySelector(".game__roll-the-dice"),f=document.querySelector("#Player1"),p=document.querySelector("#Player2"),c=document.querySelector("#allResults"),D=new I,o=new E,d=new m,a=new m,u=new w;D.subscribe(o);o.subscribe(d);o.subscribe(a);d.subscribe(u);a.subscribe(u);r==null||r.addEventListener("click",()=>{D.next(),c!=null&&(c.previousElementSibling!==null&&(c.previousElementSibling.innerHTML=`Dice cap - ${u.getSumDices()}`),c.innerHTML=u.allDice.join(" ")),f!=null&&p!=null&&(y(d,f),y(a,p))});function y(t,e){var b;t.getWinStatus()&&((b=e.closest(".game__item"))==null||b.setAttribute("style","background-color:rgb(217 59 59 / 100%);"),r==null||r.setAttribute("disabled","true"));const s=e.previousElementSibling,i=e==null?void 0:e.id;s!=null&&(s.innerHTML=`${i} - ${t.getSumDices()}`),e.innerHTML=t.diceResults.join(" ")}
