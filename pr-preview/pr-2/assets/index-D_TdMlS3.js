var g=Object.defineProperty;var S=(t,e,s)=>e in t?g(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var n=(t,e,s)=>S(t,typeof e!="symbol"?e+"":e,s);import"./modulepreload-polyfill-B5Qt9EMX.js";class c{constructor(){n(this,"subscribers",[])}subscribe(e){this.subscribers.includes(e)||this.subscribers.push(e)}unsubscribe(e){const s=this.subscribers.indexOf(e);s!==-1&&this.subscribers.splice(s,1)}notify(e){this.subscribers.forEach(s=>s.update(e))}}const R=6;class D extends c{constructor(e=R){super(),this.sideDice=e}rollDice(){const{crypto:e}=window,s=new Uint8Array(1);return e.getRandomValues(s),s[0]%this.sideDice+1}notify(e){this.subscribers.forEach((s,r)=>{e===r&&s.update(this.rollDice())})}update(e){this.notify(e)}}const E=0;class _ extends c{constructor(s=2){super();n(this,"currentTurn",E);this.playerCount=s}next(){const s=this.currentTurn%this.playerCount;this.notify(s),this.currentTurn+=1}}const w=21;class f extends c{constructor(){super(...arguments);n(this,"diceResults",[])}result(s){this.diceResults.push(s)}getScore(){return this.diceResults.reduce((s,r)=>s+r,0)}getWinner(){return this.getScore()>=w}printResult(){return this.diceResults.join(" ")}notify(s){this.subscribers.forEach(r=>{r.update(s)})}update(s){this.result(s),this.notify(s)}}class x{constructor(){n(this,"allDice",[])}getSumDices(){return this.allDice.reduce((e,s)=>e+s,0)}printResult(){return this.allDice.join(" ")}update(e){this.allDice.push(e)}}const i=document.querySelector(".game__roll-the-dice"),b=document.querySelector("#player1"),h=document.querySelector("#player2"),p=document.querySelector("#allResults"),m=new _,l=new D,o=new f,a=new f,u=new x;m.subscribe(l);l.subscribe(o);l.subscribe(a);o.subscribe(u);a.subscribe(u);i==null||i.addEventListener("click",()=>{m.next(),p!=null&&A(p),b!=null&&h!=null&&(y(o,b),y(a,h))});function A(t){var s;const e=(s=t.previousElementSibling)==null?void 0:s.querySelector(".game-stand__sum");e!=null&&(e.innerHTML=`${u.getSumDices()}`),t.innerHTML=u.printResult()}function y(t,e){var r,d;t.getWinner()&&((r=e.closest(".game__item"))==null||r.classList.add("game-winner"),i==null||i.setAttribute("disabled","true"));const s=(d=e.previousElementSibling)==null?void 0:d.querySelector(".game-stand__sum");s!=null&&(s.innerHTML=`${t.getScore()}`),e.innerHTML=t.printResult()}
