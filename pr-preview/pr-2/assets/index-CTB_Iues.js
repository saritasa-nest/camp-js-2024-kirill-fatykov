var S=Object.defineProperty;var D=(t,e,s)=>e in t?S(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var n=(t,e,s)=>D(t,typeof e!="symbol"?e+"":e,s);import"./modulepreload-polyfill-B5Qt9EMX.js";class c{constructor(){n(this,"subscribers",[])}subscribe(e){this.subscribers.includes(e)||this.subscribers.push(e)}unsubscribe(e){const s=this.subscribers.indexOf(e);s!==-1&&this.subscribers.splice(s,1)}notify(e){this.subscribers.forEach(s=>s.update(e))}}const E=6;class R extends c{constructor(e=E){super(),this.sideDice=e}rollDice(){const{crypto:e}=window,s=new Uint8Array(1);return e.getRandomValues(s),s[0]%this.sideDice+1}notify(e){this.subscribers.forEach((s,i)=>{e===i&&s.update(this.rollDice())})}update(e){this.notify(e)}}const h=0;class w extends c{constructor(s=2){super();n(this,"currentTurn",h);this.playerCount=s}next(){const s=this.currentTurn%this.playerCount;this.currentTurn===this.playerCount&&(this.currentTurn=h),this.notify(s),this.currentTurn+=1}}const T=21;class m extends c{constructor(){super(...arguments);n(this,"diceResults",[])}result(s){this.diceResults.push(s)}getScore(){return this.diceResults.reduce((s,i)=>s+i,0)}getWinner(){return this.getScore()>=T}printResult(){return this.diceResults.join(" ")}notify(s){this.subscribers.forEach(i=>{i.update(s)})}update(s){this.result(s),this.notify(s)}}class _{constructor(){n(this,"allDice",[])}getSumDices(){return this.allDice.reduce((e,s)=>e+s,0)}printResult(){return this.allDice.join(" ")}update(e){this.allDice.push(e)}}const r=document.querySelector(".game__roll-the-dice"),p=document.querySelector("#player1"),b=document.querySelector("#player2"),f=document.querySelector("#allResults"),g=new w,l=new R,o=new m,d=new m,u=new _;g.subscribe(l);l.subscribe(o);l.subscribe(d);o.subscribe(u);d.subscribe(u);r==null||r.addEventListener("click",()=>{g.next(),f!=null&&x(f),p!=null&&b!=null&&(y(o,p),y(d,b))});function x(t){t.previousElementSibling!==null&&(t.previousElementSibling.innerHTML=`Dice cap - ${u.getSumDices()}`),t.innerHTML=u.printResult()}function y(t,e){var a;t.getWinner()&&((a=e.closest(".game__item"))==null||a.classList.add("game__winner"),r==null||r.setAttribute("disabled","true"));const s=e.previousElementSibling,i=e==null?void 0:e.id;s!=null&&(s.innerHTML=`${i[0].toUpperCase()}${i.slice(1)} 
		- ${t.getScore()}`),e.innerHTML=t.printResult()}
