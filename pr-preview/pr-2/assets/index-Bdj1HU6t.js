var m=Object.defineProperty;var P=(t,e,s)=>e in t?m(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var n=(t,e,s)=>P(t,typeof e!="symbol"?e+"":e,s);import"./modulepreload-polyfill-B5Qt9EMX.js";class c{constructor(){n(this,"subscribers",[])}subscribe(e){this.subscribers.includes(e)||this.subscribers.push(e)}unsubscribe(e){const s=this.subscribers.indexOf(e);s!==-1&&this.subscribers.splice(s,1)}notify(e){this.subscribers.forEach(s=>s.update(e))}}const I=6;class g extends c{constructor(e=I){super(),this.sideDice=e,this.sideDice=e}rollDice(){const{crypto:e}=window,s=new Uint8Array(1);return e.getRandomValues(s),s[0]%this.sideDice+1}notify(e){this.subscribers.forEach((s,i)=>{e===i&&s.update(this.rollDice())})}update(e){this.notify(e)}}const d=-1;class w extends c{constructor(s=2){super();n(this,"currentPlayerIndex",d);this.playerCount=s,this.playerCount=s}next(){this.currentPlayerIndex===this.playerCount-1||this.currentPlayerIndex===d?this.currentPlayerIndex=0:this.currentPlayerIndex+=1,this.notify(this.currentPlayerIndex)}}const D=21;class p extends c{constructor(){super(...arguments);n(this,"diceResults",[])}result(s){this.diceResults.push(s)}getWinStatus(){return this.diceResults.reduce((s,i)=>s+i,0)>=D}notify(s){this.subscribers.forEach(i=>{i.update(s)})}update(s){this.result(s),this.notify(s)}}class E{constructor(){n(this,"allDice",[])}update(e){this.allDice.push(e)}}const r=document.querySelector(".game__roll-the-dice"),b=document.getElementById("Player1"),h=document.getElementById("Player2"),y=document.getElementById("allResults"),x=new w,u=new g,l=new p,o=new p,a=new E;x.subscribe(u);u.subscribe(l);u.subscribe(o);l.subscribe(a);o.subscribe(a);r==null||r.addEventListener("click",()=>{x.next(),y!=null&&(y.innerText=a.allDice.join(" ")),b!=null&&h!=null&&(f(l,b),f(o,h))});function f(t,e){var s;t.getWinStatus()&&((s=e.closest(".game__item"))==null||s.setAttribute("style","background-color:red;"),r==null||r.setAttribute("disabled","true")),e.innerText=t.diceResults.join(" ")}
